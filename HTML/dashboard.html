<!DOCTYPE html>
<html ng-app="dbApp" ng-controller="DashboardCtrl">
<head>
    <title>Dashboard</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-messages.min.js"></script>
    <script src = "controllers/dashboardCtrl.js"></script>
</head>
<body class="dashboard">

    <md-nav-bar>
        <md-nav-item md-nav-click="logout()"><font color="white">Logout</font></md-nav-item>
    </md-nav-bar>

    <div class="header">
      <br>
      <img src="university.png" alt="logo"/>
      <h1><font color="#E95412">Dashboard</font></h1>
    </div>

    <h5 style="text-align:center"><font color="white">UserID:</font> {{userInfo.userID}}</h5>
    <md-content layout-padding style="background-color:gray;padding:50px" >
    <div class="boxWithShadow" style="background-color:white;width:70%;margin:auto;border-radius:25px">
    <md-input-container>
        <md-button ng-click="createEvent()"><font color="green">Create Your Event</font></md-button>
    </md-input-container>
    <md-input-container>
        <md-button ng-click="createRSO()"><font color="green">Create your RSO</font></md-button>
    </md-input-container>
    <md-input-container>
        <label>Select</label>
        <md-select ng-model="searchCat">
            <md-option value="0">Public Event</md-option>
            <md-option value="1">Private Event</md-option>
            <md-option value="2">RSO Event</md-option>
            <md-option value="3">RSO Org</md-option>
        </md-select>
    </md-input-container>
    <md-input-container>
        <label>Search</label>
        <input type="text" ng-model="searchParam">
    </md-input-container>
    <md-input-container>
        <md-button ng-click="search()">Enter</md-button>
    </md-input-container>
    </div>

    <br>
    <br>

     <div class="boxWithShadow" style="background-color:white;width:70%;margin:auto;border-radius:25px">
        <div id="default" ng-show="!createEventToggle && !createRSOToggle && !showEventSearchResults && !showRSOSearchResults && !viewEventToggle">
          <font color="black">Welcome! Please select an option above.</font>
        </div>
        <div id="eventSearchResults"  ng-show="!createEventToggle && !createRSOToggle && showEventSearchResults">
        <table>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Start Time</th>
                <th>End Time</th>
                <th>Location</th>
                <th>Category</th>
                <th>POC</th>
                <th>Attend</th>
                <th>View</th>
            </tr>
            <tr ng-repeat="n in searchResults.data">
                <td>{{n.name}}</td>
                <td>{{n.description}}</td>
                <td>{{n.startTime |date:"MM/dd/yyyy 'at' h:mma"}}</td>
                <td>{{n.endTime |date:"MM/dd/yyyy 'at' h:mma"}}</td>
                <td>{{n.location}}</td>
                <td>{{n.cat}}</td>
                <td>{{n.userID}}</td>
                <td><md-button ng-click="attendEvent(n)">Attend</md-button></td>
                <td><md-button ng-click="viewEvent(n)">View</md-button></td>
            </tr>
        </table>
    </div>

    <div id="RSOSearchResults"  ng-show="!createEventToggle && !createRSOToggle && showRSOSearchResults">
            <table>
                <tr>
                    <th>Name</th>
                    <th>University</th>
                    <th>Admin</th>
                    <th>Status</th>
                    <th>Join</th>
                </tr>
                <tr ng-repeat="n in searchResults.data">
                    <td>{{n.name}}</td>
                    <td>{{n.universityID}}</td>
                    <td>{{n.userID}}</td>
                    <td>{{n.active}}</td>
                    <td><md-button ng-click="joinRSO(n)">Join</md-button></td>
                </tr>
            </table>
        </div>


    <div id="createEvent" ng-show="createEventToggle">
        <form name="form.createEvent">
            <md-input-container>
                <label>Name:</label>
                <input type="text" ng-model="event.name">
            </md-input-container>
            <md-input-container>
                <label>Start Time: (format YYYY-MM-DD HH:MM:SS)</label>
                <input type="text" ng-model="event.startTime">
            </md-input-container>
            <md-input-container>
                <label>End Time: (format YYYY-MM-DD HH:MM:SS)</label>
                <input type="text" ng-model="event.endTime">
            </md-input-container>
            <md-input-container>
                <label>Location:</label>
                <input type="text" ng-model="event.location">
            </md-input-container>
            <md-input-container>
                <label>UserID: </label>
                <input type="text" ng-model="event.userID">
            </md-input-container>
            <md-input-container>
                <label>Category:</label>
                <md-select ng-model="event.cat">
                        <md-option value="0">Public Event</md-option>
                        <md-option value="1">Private Event</md-option>
                        <md-option value="2">RSO Event</md-option>
                    </md-select>
            </md-input-container>
            <md-input-container>
                <label>Description:</label>
                <input type="text" ng-model="event.description">
            </md-input-container>
            <br>
            <md-button style="color:green" ng-click="createEvent()">Create</md-button>

        </form>
    </div>
    <div name="createRSO" ng-show="createRSOToggle">
        <br>
        <h2 style="color:black;text-align:center">Create RSO</h2>
        <form name="form.createRSO">
          <h6 style="color:red;text-align:center">Your RSO will be inactive until at least 4 <br> more members have joined.</h6>
            <md-input-container>
                <label>Name:</label>
                <input type="text" ng-model="rso.name">
            </md-input-container>
            <md-input-container>
                <label>UniversityID</label>
                <input type="text" ng-model="rso.universityID">
            </md-input-container>
            <br>
            <md-button ng-click="cancel()">Cancel</md-button>
            <md-button ng-click="createRSO()">Create</md-button>
        </form>
    </div>

    <div id="viewEvent" ng-show="viewEventToggle">
        <div id="info">
           <h4>Name: {{pulledEvent.name}}</h4>
           <h3>Description: {{pulledEvent.description}}</h3>
        </div>
           <div id="comments">
               <div id="newComment">
               <form name="form.newComment" ng-show="!editCommentForm">
                   <h4>Make a comment: </h4>
                   <md-input-container>
                       <label>Comment: </label>
                       <input ng-model="newComment.commentText">
                   </md-input-container>
                   <md-input-container>
                       <label>Rating (1-5): </label>
                       <input ng-model="newComment.rating">
                   </md-input-container>
                   <md-button ng-click="saveComment()">Save</md-button>
               </form>
            </div>
            <div id="editComment" ng-show="editCommentForm">
                    <form name="form.editComment">
                        <h4>Update comment: </h4>
                        <md-input-container>
                            <label>Comment: </label>
                            <input ng-model="commentToEdit.commentText">
                        </md-input-container>
                        <md-input-container>
                            <label>Rating (1-5): </label>
                            <input ng-model="commentToEdit.rating">
                        </md-input-container>
                        <md-button ng-click="updateComment()">Save Changes</md-button>
                    </form>
                 </div>
               <div style="float:center" style="overflow-y: scroll">
                   <table style="text-align:center;border-collapse:collapse;border:1px solid black;overflow-y:scroll">
                       <tr>
                           <th>Comment</th>
                           <th>Rating</th>
                           <th>Edit</th>
                           <th>Delete</th>
                        </tr>
                        <tr ng-repeat="x in pulledComments.data">
                            <td>{{x.commentText}}</td>
                            <td>{{x.rating}}</td>
                            <td><md-button ng-click="editComment(x)">Edit</md-button></td>
                            <td><md-button ng-click="deleteComment(x)">Delete</md-button></td>
                        </tr>
                   </table>

               </div>

        </div>
    </div>

    </div>
</body>
</html>
